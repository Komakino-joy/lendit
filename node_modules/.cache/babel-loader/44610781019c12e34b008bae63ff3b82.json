{"ast":null,"code":"import { call, put, fork, take, takeLatest, all } from \"redux-saga/effects\";\nimport { REQUEST_SELECTED_ASSET, CHECK_IN_SELECTED_ASSET_START, REQUEST_NEW_ASSET_STATUS, receiveSelectedAssetData, checkInSelectedAssetSuccess, receiveNewAssetData } from \"../asset/asset.actions\";\nimport { fetchSelectedAssetData, checkInAsset, getUpdatedAssetData } from \"../../services/api\";\n\nfunction* takeFirst(pattern, saga, ...args) {\n  const task = yield fork(function* () {\n    while (true) {\n      const action = yield take(pattern);\n      yield call(saga, ...args.concat(action));\n    }\n  });\n  return task;\n} // worker Saga: will be fired on USER_FETCH_REQUESTED actions\n\n\nfunction* getRequestedSelectedAssetData(action) {\n  try {\n    // do api call\n    const assetData = yield call(fetchSelectedAssetData, action.assetID);\n    yield put(receiveSelectedAssetData(assetData));\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction* postCheckInSelectedAsset(action) {\n  try {\n    const assetData = yield call(checkInAsset, action.assetID);\n    yield put(checkInSelectedAssetSuccess(assetData));\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction* getNewAssetStatus(action) {\n  try {\n    const newAssetData = yield call(getUpdatedAssetData, action.assetID);\n    yield put(receiveNewAssetData(newAssetData));\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nexport function* requestSelectedAssetSaga() {\n  yield takeLatest(REQUEST_SELECTED_ASSET, getRequestedSelectedAssetData);\n}\nexport function* checkInSelectedAssetSaga() {\n  console.log('STEP 4: checkInSelectedAssetSaga() takes first from action \"CHECK_IN_SELECTED_ASSET_START\" and runs postCheckInSelectedAsset() ');\n  yield takeFirst(CHECK_IN_SELECTED_ASSET_START, postCheckInSelectedAsset);\n}\nexport function* retrieveNewStatusSaga() {\n  yield takeLatest(REQUEST_NEW_ASSET_STATUS, getNewAssetStatus);\n}\nexport function* assetSagas() {\n  console.log('STEP 3: assetSagas function yields call to saga functions, [call (requestSelectedAssetSaga), call(checkInSelectedAssetSaga)]');\n  yield all([call(requestSelectedAssetSaga), call(checkInSelectedAssetSaga), call(retrieveNewStatusSaga)]);\n}\n;","map":{"version":3,"sources":["C:/Users/bryan.alvarez/Documents/webdev/git/comp-overload/client/src/redux/asset/asset.sagas.js"],"names":["call","put","fork","take","takeLatest","all","REQUEST_SELECTED_ASSET","CHECK_IN_SELECTED_ASSET_START","REQUEST_NEW_ASSET_STATUS","receiveSelectedAssetData","checkInSelectedAssetSuccess","receiveNewAssetData","fetchSelectedAssetData","checkInAsset","getUpdatedAssetData","takeFirst","pattern","saga","args","task","action","concat","getRequestedSelectedAssetData","assetData","assetID","error","console","log","postCheckInSelectedAsset","getNewAssetStatus","newAssetData","requestSelectedAssetSaga","checkInSelectedAssetSaga","retrieveNewStatusSaga","assetSagas"],"mappings":"AAAA,SAASA,IAAT,EAAeC,GAAf,EAAoBC,IAApB,EAA0BC,IAA1B,EAAgCC,UAAhC,EAA4CC,GAA5C,QAAuD,oBAAvD;AAEA,SACIC,sBADJ,EAEIC,6BAFJ,EAGIC,wBAHJ,EAIIC,wBAJJ,EAKIC,2BALJ,EAMIC,mBANJ,QAOU,wBAPV;AASA,SACEC,sBADF,EAEEC,YAFF,EAGEC,mBAHF,QAIQ,oBAJR;;AAOC,UAAUC,SAAV,CAAoBC,OAApB,EAA6BC,IAA7B,EAAmC,GAAGC,IAAtC,EAA4C;AAC3C,QAAMC,IAAI,GAAG,MAAMjB,IAAI,CAAC,aAAa;AACjC,WAAM,IAAN,EAAY;AACV,YAAMkB,MAAM,GAAG,MAAMjB,IAAI,CAACa,OAAD,CAAzB;AACA,YAAMhB,IAAI,CAACiB,IAAD,EAAO,GAAGC,IAAI,CAACG,MAAL,CAAYD,MAAZ,CAAV,CAAV;AACD;AACF,GALoB,CAAvB;AAME,SAAOD,IAAP;AACD,C,CAEH;;;AACA,UAAUG,6BAAV,CAAwCF,MAAxC,EAAgD;AAC9C,MAAI;AACF;AACA,UAAMG,SAAS,GAAG,MAAMvB,IAAI,CAACY,sBAAD,EAAyBQ,MAAM,CAACI,OAAhC,CAA5B;AACA,UAAMvB,GAAG,CAACQ,wBAAwB,CAACc,SAAD,CAAzB,CAAT;AACD,GAJD,CAIE,OAAOE,KAAP,EAAc;AACdC,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD;AACF;;AAED,UAAUG,wBAAV,CAAmCR,MAAnC,EAA2C;AACzC,MAAG;AACD,UAAMG,SAAS,GAAG,MAAMvB,IAAI,CAACa,YAAD,EAAeO,MAAM,CAACI,OAAtB,CAA5B;AACA,UAAMvB,GAAG,CAACS,2BAA2B,CAACa,SAAD,CAA5B,CAAT;AACD,GAHD,CAGG,OAAOE,KAAP,EAAc;AACfC,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD;AACF;;AAED,UAAUI,iBAAV,CAA4BT,MAA5B,EAAoC;AAClC,MAAG;AACD,UAAMU,YAAY,GAAG,MAAM9B,IAAI,CAACc,mBAAD,EAAsBM,MAAM,CAACI,OAA7B,CAA/B;AACA,UAAMvB,GAAG,CAACU,mBAAmB,CAACmB,YAAD,CAApB,CAAT;AACD,GAHD,CAGE,OAAML,KAAN,EAAa;AACbC,IAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD;AACF;;AAED,OAAQ,UAAUM,wBAAV,GAAqC;AAC3C,QAAM3B,UAAU,CAACE,sBAAD,EAAyBgB,6BAAzB,CAAhB;AACD;AAGD,OAAQ,UAAUU,wBAAV,GAAqC;AAC3CN,EAAAA,OAAO,CAACC,GAAR,CAAY,iIAAZ;AACA,QAAMZ,SAAS,CAACR,6BAAD,EAAgCqB,wBAAhC,CAAf;AACD;AAED,OAAO,UAAUK,qBAAV,GAAkC;AACvC,QAAM7B,UAAU,CAACI,wBAAD,EAA2BqB,iBAA3B,CAAhB;AACD;AAGD,OAAO,UAAUK,UAAV,GAAuB;AAC1BR,EAAAA,OAAO,CAACC,GAAR,CAAY,8HAAZ;AACA,QAAMtB,GAAG,CAAC,CACRL,IAAI,CAAE+B,wBAAF,CADI,EAER/B,IAAI,CAACgC,wBAAD,CAFI,EAGRhC,IAAI,CAACiC,qBAAD,CAHI,CAAD,CAAT;AAKH;AAAA","sourcesContent":["import { call, put, fork, take, takeLatest, all } from \"redux-saga/effects\";\r\n\r\nimport { \r\n    REQUEST_SELECTED_ASSET,\r\n    CHECK_IN_SELECTED_ASSET_START,\r\n    REQUEST_NEW_ASSET_STATUS,\r\n    receiveSelectedAssetData,\r\n    checkInSelectedAssetSuccess,\r\n    receiveNewAssetData\r\n   } from \"../asset/asset.actions\";\r\n\r\nimport { \r\n  fetchSelectedAssetData,\r\n  checkInAsset,\r\n  getUpdatedAssetData\r\n } from \"../../services/api\";\r\n\r\n\r\n function* takeFirst(pattern, saga, ...args) {\r\n  const task = yield fork(function* () {\r\n      while(true) {\r\n        const action = yield take(pattern);\r\n        yield call(saga, ...args.concat(action));\r\n      }\r\n    });\r\n    return task;\r\n  }\r\n\r\n// worker Saga: will be fired on USER_FETCH_REQUESTED actions\r\nfunction* getRequestedSelectedAssetData(action) {\r\n  try {\r\n    // do api call\r\n    const assetData = yield call(fetchSelectedAssetData, action.assetID);\r\n    yield put(receiveSelectedAssetData(assetData));\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n}\r\n\r\nfunction* postCheckInSelectedAsset(action) {\r\n  try{\r\n    const assetData = yield call(checkInAsset, action.assetID )\r\n    yield put(checkInSelectedAssetSuccess(assetData))\r\n  }  catch (error) {\r\n    console.log(error)\r\n  }\r\n}\r\n\r\nfunction* getNewAssetStatus(action) {\r\n  try{\r\n    const newAssetData = yield call(getUpdatedAssetData, action.assetID)\r\n    yield put(receiveNewAssetData(newAssetData))\r\n  } catch(error) {\r\n    console.log(error)\r\n  }\r\n}\r\n\r\nexport  function* requestSelectedAssetSaga() {\r\n  yield takeLatest(REQUEST_SELECTED_ASSET, getRequestedSelectedAssetData);\r\n}\r\n\r\n\r\nexport  function* checkInSelectedAssetSaga() {\r\n  console.log('STEP 4: checkInSelectedAssetSaga() takes first from action \"CHECK_IN_SELECTED_ASSET_START\" and runs postCheckInSelectedAsset() ')\r\n  yield takeFirst(CHECK_IN_SELECTED_ASSET_START, postCheckInSelectedAsset);\r\n}\r\n\r\nexport function* retrieveNewStatusSaga() {\r\n  yield takeLatest(REQUEST_NEW_ASSET_STATUS, getNewAssetStatus)\r\n}\r\n\r\n\r\nexport function* assetSagas() {\r\n    console.log('STEP 3: assetSagas function yields call to saga functions, [call (requestSelectedAssetSaga), call(checkInSelectedAssetSaga)]')\r\n    yield all([\r\n      call (requestSelectedAssetSaga), \r\n      call(checkInSelectedAssetSaga),\r\n      call(retrieveNewStatusSaga)\r\n    ])\r\n};"]},"metadata":{},"sourceType":"module"}