{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"C:/Users/alvar/Documents/WebDev/lendit/lendit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import{useAlert}from\"react-alert\";import{RegistrationPageBody,RegistrationArticle,RegistrationMain,RegistrationFieldSet,RegistrationLegend,RegistrationInput,RegistrationSubmit,NameFieldContainer,NameField,Email,Password,PasswordRules,SignInLinkContainer,SignInLink,ToolTip,Arrow,InfoIcon}from\"./register.styles\";import infoIconSvg from\"../../images/info_icon.svg\";import{API_URL}from'../../services/api';var RegistrationPage=function RegistrationPage(_ref){var history=_ref.history;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),fname=_useState2[0],setFname=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),lname=_useState4[0],setLname=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),email=_useState6[0],setEmail=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),password=_useState8[0],setPassword=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),failedPassword=_useState10[0],setFailedPassword=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),popupVisibility=_useState12[0],setPopupVisibility=_useState12[1];var alert=useAlert();var onFirstNameChange=function onFirstNameChange(event){setFname(event.target.value);};var onLastNameChange=function onLastNameChange(event){setLname(event.target.value);};var onEmailChange=function onEmailChange(event){setEmail(event.target.value);};var onPasswordChange=function onPasswordChange(event){setPassword(event.target.value);};var onMouseOverInfo=function onMouseOverInfo(event){setPopupVisibility(true);setFailedPassword(false);};var onSubmitRegister=function onSubmitRegister(){if(!fname||!lname||!email||!password){alert.show('Missing required fields',{type:\"error\",position:\"top center\"});return;};// regular expression: password must contain 8 characters minimum, one capital letter, and one number.\nvar VALIDATE_PWORD=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)[a-zA-Z\\d]{8,}$/;if(!VALIDATE_PWORD.test(password)){setFailedPassword(true);return;};fetch(\"\".concat(API_URL,\"/members/register\"),{method:\"post\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({fname:fname,lname:lname,email:email,password:password})})// * Handling incorrect credentials\n.then(function(response){return response.json();}).then(function(member){if(member.id){history.push(\"/signin\");}else{alert.show('Unable to register',{type:\"error\",position:\"top center\"});}});};return/*#__PURE__*/_jsxs(RegistrationPageBody,{children:[/*#__PURE__*/_jsx(RegistrationLegend,{children:\"Registration\"}),/*#__PURE__*/_jsx(RegistrationArticle,{children:/*#__PURE__*/_jsxs(RegistrationMain,{children:[/*#__PURE__*/_jsxs(RegistrationFieldSet,{children:[/*#__PURE__*/_jsxs(NameFieldContainer,{children:[/*#__PURE__*/_jsx(NameField,{children:/*#__PURE__*/_jsx(RegistrationInput,{placeholder:\"First Name (required)\",type:\"text\",name:\"fname\",id:\"fname\",onChange:onFirstNameChange})}),/*#__PURE__*/_jsx(NameField,{children:/*#__PURE__*/_jsx(RegistrationInput,{style:{marginLeft:\"15%\"},placeholder:\"Last Name (required)\",type:\"text\",name:\"lname\",id:\"lname\",onChange:onLastNameChange})})]}),/*#__PURE__*/_jsx(Email,{children:/*#__PURE__*/_jsx(RegistrationInput,{placeholder:\"Email (required)\",type:\"email\",name:\"email-address\",id:\"email-address\",onChange:onEmailChange})}),/*#__PURE__*/_jsxs(Password,{children:[/*#__PURE__*/_jsx(RegistrationInput,{placeholder:\"Password (required)\",type:\"password\",name:\"password\",id:\"password\",onChange:onPasswordChange}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(InfoIcon,{src:infoIconSvg,alt:\"info-icon\",onMouseOver:onMouseOverInfo,onMouseOut:function onMouseOut(){return setPopupVisibility(false);}}),popupVisibility?/*#__PURE__*/_jsxs(ToolTip,{children:[/*#__PURE__*/_jsx(Arrow,{}),/*#__PURE__*/_jsx(\"span\",{style:{color:\"#3f7fba\",fontWeight:\"bold\",textDecoration:'underline'},children:\"Password Rules\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{children:\"-Must be at least 8 characters long\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{children:\"-Must contain at least one uppercase letter.\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{children:\"-Must contain at least one lowercase letter.\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{children:\"-Must contain at least one number.\"})]}):null]})]}),failedPassword?/*#__PURE__*/_jsxs(PasswordRules,{children:[/*#__PURE__*/_jsx(\"span\",{children:\"Password must: \"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{children:\"be at least 8 characters long; contain at least one uppercase letter;\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{children:\"Contain at least one lowercase letter; contain at least one number.\"})]}):null]}),/*#__PURE__*/_jsx(RegistrationSubmit,{type:\"submit\",value:\"Register\",onClick:onSubmitRegister}),/*#__PURE__*/_jsx(SignInLinkContainer,{children:/*#__PURE__*/_jsx(SignInLink,{onClick:function onClick(){return history.push(\"/signin\");},className:\"signin-link\",children:\"Already have an account?\"})})]})})]});};export default RegistrationPage;","map":{"version":3,"sources":["C:/Users/alvar/Documents/WebDev/lendit/lendit/src/pages/register/register.component.jsx"],"names":["React","useState","useAlert","RegistrationPageBody","RegistrationArticle","RegistrationMain","RegistrationFieldSet","RegistrationLegend","RegistrationInput","RegistrationSubmit","NameFieldContainer","NameField","Email","Password","PasswordRules","SignInLinkContainer","SignInLink","ToolTip","Arrow","InfoIcon","API_URL","RegistrationPage","history","fname","setFname","lname","setLname","email","setEmail","password","setPassword","failedPassword","setFailedPassword","popupVisibility","setPopupVisibility","alert","onFirstNameChange","event","target","value","onLastNameChange","onEmailChange","onPasswordChange","onMouseOverInfo","onSubmitRegister","show","type","position","VALIDATE_PWORD","test","fetch","method","headers","body","JSON","stringify","then","response","json","member","id","push","marginLeft","infoIconSvg","color","fontWeight","textDecoration"],"mappings":"4PAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,OAASC,QAAT,KAAyB,aAAzB,CAEA,OAASC,oBAAT,CAA+BC,mBAA/B,CAAoDC,gBAApD,CAAsEC,oBAAtE,CAA4FC,kBAA5F,CACEC,iBADF,CACqBC,kBADrB,CACyCC,kBADzC,CAC6DC,SAD7D,CACwEC,KADxE,CAC+EC,QAD/E,CACwFC,aADxF,CACuGC,mBADvG,CAC4HC,UAD5H,CAEEC,OAFF,CAEWC,KAFX,CAEkBC,QAFlB,KAGO,mBAHP,C,oDAOA,OAASC,OAAT,KAAwB,oBAAxB,CAEA,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,MAAgB,IAAbC,CAAAA,OAAa,MAAbA,OAAa,eAEbrB,QAAQ,CAAC,EAAD,CAFK,wCAEhCsB,KAFgC,eAEzBC,QAFyB,8BAGbvB,QAAQ,CAAC,EAAD,CAHK,yCAGhCwB,KAHgC,eAGzBC,QAHyB,8BAIbzB,QAAQ,CAAC,EAAD,CAJK,yCAIhC0B,KAJgC,eAIzBC,QAJyB,8BAKP3B,QAAQ,CAAC,EAAD,CALD,yCAKhC4B,QALgC,eAKtBC,WALsB,8BAMK7B,QAAQ,CAAC,KAAD,CANb,0CAMhC8B,cANgC,gBAMhBC,iBANgB,gCAOO/B,QAAQ,CAAC,KAAD,CAPf,2CAOhCgC,eAPgC,gBAOfC,kBAPe,gBASvC,GAAMC,CAAAA,KAAK,CAAGjC,QAAQ,EAAtB,CAEA,GAAMkC,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACC,KAAD,CAAW,CACnCb,QAAQ,CAACa,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAR,CACD,CAFD,CAIA,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACH,KAAD,CAAW,CAClCX,QAAQ,CAACW,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAR,CACD,CAFD,CAIA,GAAME,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACJ,KAAD,CAAW,CAC/BT,QAAQ,CAACS,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAR,CACD,CAFD,CAIA,GAAMG,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACL,KAAD,CAAW,CAClCP,WAAW,CAACO,KAAK,CAACC,MAAN,CAAaC,KAAd,CAAX,CACD,CAFD,CAIA,GAAMI,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACN,KAAD,CAAW,CACjCH,kBAAkB,CAAC,IAAD,CAAlB,CACAF,iBAAiB,CAAC,KAAD,CAAjB,CACD,CAHD,CAKA,GAAMY,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,EAAM,CAE7B,GAAI,CAACrB,KAAD,EAAU,CAACE,KAAX,EAAoB,CAACE,KAArB,EAA8B,CAACE,QAAnC,CAA6C,CAC3CM,KAAK,CAACU,IAAN,CAAW,yBAAX,CAAuC,CAAEC,IAAI,CAAE,OAAR,CAAkBC,QAAQ,CAAC,YAA3B,CAAvC,EACA,OACD,EAED;AACA,GAAMC,CAAAA,cAAc,CAAG,gDAAvB,CAEA,GAAK,CAACA,cAAc,CAACC,IAAf,CAAoBpB,QAApB,CAAN,CAAsC,CACpCG,iBAAiB,CAAC,IAAD,CAAjB,CACA,OACD,EAEDkB,KAAK,WAAI9B,OAAJ,sBAAgC,CACnC+B,MAAM,CAAE,MAD2B,CAEnCC,OAAO,CAAE,CAAE,eAAgB,kBAAlB,CAF0B,CAGnCC,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACnBhC,KAAK,CAAEA,KADY,CAEnBE,KAAK,CAAEA,KAFY,CAGnBE,KAAK,CAAEA,KAHY,CAInBE,QAAQ,CAAEA,QAJS,CAAf,CAH6B,CAAhC,CAUH;AAVF,CAWG2B,IAXH,CAWQ,SAACC,QAAD,QAAcA,CAAAA,QAAQ,CAACC,IAAT,EAAd,EAXR,EAYGF,IAZH,CAYQ,SAACG,MAAD,CAAY,CAChB,GAAIA,MAAM,CAACC,EAAX,CAAe,CACbtC,OAAO,CAACuC,IAAR,CAAa,SAAb,EACD,CAFD,IAEO,CACL1B,KAAK,CAACU,IAAN,CAAW,oBAAX,CAAkC,CAAEC,IAAI,CAAE,OAAR,CAAkBC,QAAQ,CAAC,YAA3B,CAAlC,EACD,CACF,CAlBH,EAmBD,CAlCD,CAoCA,mBACE,MAAC,oBAAD,yBACE,KAAC,kBAAD,2BADF,cAEE,KAAC,mBAAD,wBACE,MAAC,gBAAD,yBACE,MAAC,oBAAD,yBACE,MAAC,kBAAD,yBACE,KAAC,SAAD,wBACE,KAAC,iBAAD,EACE,WAAW,CAAC,uBADd,CAEE,IAAI,CAAC,MAFP,CAGE,IAAI,CAAC,OAHP,CAIE,EAAE,CAAC,OAJL,CAKE,QAAQ,CAAEX,iBALZ,EADF,EADF,cAWE,KAAC,SAAD,wBACE,KAAC,iBAAD,EACE,KAAK,CAAI,CAAC0B,UAAU,CAAC,KAAZ,CADX,CAEE,WAAW,CAAC,sBAFd,CAGE,IAAI,CAAC,MAHP,CAIE,IAAI,CAAC,OAJP,CAKE,EAAE,CAAC,OALL,CAME,QAAQ,CAAEtB,gBANZ,EADF,EAXF,GADF,cAwBE,KAAC,KAAD,wBACE,KAAC,iBAAD,EACE,WAAW,CAAC,kBADd,CAEE,IAAI,CAAC,OAFP,CAGE,IAAI,CAAC,eAHP,CAIE,EAAE,CAAC,eAJL,CAKE,QAAQ,CAAEC,aALZ,EADF,EAxBF,cAkCE,MAAC,QAAD,yBAEE,KAAC,iBAAD,EACE,WAAW,CAAC,qBADd,CAEE,IAAI,CAAC,UAFP,CAGE,IAAI,CAAC,UAHP,CAIE,EAAE,CAAC,UAJL,CAKE,QAAQ,CAAEC,gBALZ,EAFF,cASE,oCACA,KAAC,QAAD,EACE,GAAG,CAAEqB,WADP,CAEE,GAAG,CAAC,WAFN,CAGE,WAAW,CAAEpB,eAHf,CAIE,UAAU,CAAE,4BAAMT,CAAAA,kBAAkB,CAAC,KAAD,CAAxB,EAJd,EADA,CAOID,eAAe,cACf,MAAC,OAAD,yBACE,KAAC,KAAD,IADF,cAEE,aAAM,KAAK,CAAI,CAAC+B,KAAK,CAAC,SAAP,CAAkBC,UAAU,CAAC,MAA7B,CAAqCC,cAAc,CAAE,WAArD,CAAf,4BAFF,cAGE,aAHF,cAIE,6DAJF,cAKE,aALF,cAME,sEANF,cAOE,aAPF,cAQE,sEARF,cASE,aATF,cAUE,4DAVF,GADe,CAajB,IApBF,GATF,GAlCF,CAqEInC,cAAc,cACd,MAAC,aAAD,yBACE,yCADF,cAEE,aAFF,cAGE,+FAHF,cAIE,aAJF,cAKE,6FALF,GADc,CAQZ,IA7EN,GADF,cAkFE,KAAC,kBAAD,EACE,IAAI,CAAC,QADP,CAEE,KAAK,CAAC,UAFR,CAGE,OAAO,CAAEa,gBAHX,EAlFF,cAuFE,KAAC,mBAAD,wBACE,KAAC,UAAD,EAAY,OAAO,CAAE,yBAAMtB,CAAAA,OAAO,CAACuC,IAAR,CAAa,SAAb,CAAN,EAArB,CAAoD,SAAS,CAAC,aAA9D,sCADF,EAvFF,GADF,EAFF,GADF,CAuGD,CA3KD,CA8KA,cAAexC,CAAAA,gBAAf","sourcesContent":["import React, { useState } from \"react\";\r\nimport { useAlert } from \"react-alert\";\r\n\r\nimport { RegistrationPageBody, RegistrationArticle, RegistrationMain, RegistrationFieldSet, RegistrationLegend, \r\n  RegistrationInput, RegistrationSubmit, NameFieldContainer, NameField, Email, Password,PasswordRules, SignInLinkContainer, SignInLink,\r\n  ToolTip, Arrow, InfoIcon\r\n} from \"./register.styles\";\r\n\r\nimport infoIconSvg from '../../images/info_icon.svg';\r\n\r\nimport { API_URL } from '../../services/api';\r\n\r\nconst RegistrationPage = ({ history }) =>{\r\n\r\n  const [fname, setFname] = useState('');\r\n  const [lname, setLname] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [failedPassword, setFailedPassword] = useState(false);\r\n  const [popupVisibility, setPopupVisibility] = useState(false);\r\n\r\n  const alert = useAlert();\r\n\r\n  const onFirstNameChange = (event) => {\r\n    setFname(event.target.value);\r\n  };\r\n\r\n  const onLastNameChange = (event) => {\r\n    setLname(event.target.value);\r\n  };\r\n\r\n  const onEmailChange = (event) => {\r\n    setEmail(event.target.value);\r\n  };\r\n\r\n  const onPasswordChange = (event) => {\r\n    setPassword(event.target.value);\r\n  };\r\n\r\n  const onMouseOverInfo = (event) => {\r\n    setPopupVisibility(true); \r\n    setFailedPassword(false)\r\n  };\r\n\r\n  const onSubmitRegister = () => {\r\n\r\n    if (!fname || !lname || !email || !password) {\r\n      alert.show('Missing required fields' , { type: \"error\" , position:\"top center\"});\r\n      return;\r\n    };\r\n\r\n    // regular expression: password must contain 8 characters minimum, one capital letter, and one number.\r\n    const VALIDATE_PWORD = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)[a-zA-Z\\d]{8,}$/\r\n\r\n    if ( !VALIDATE_PWORD.test(password) ) {\r\n      setFailedPassword(true);\r\n      return;\r\n    };\r\n  \r\n    fetch(`${API_URL}/members/register`, {\r\n      method: \"post\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({\r\n        fname: fname,\r\n        lname: lname,\r\n        email: email,\r\n        password: password,\r\n      }),\r\n    })\r\n      // * Handling incorrect credentials\r\n      .then((response) => response.json())\r\n      .then((member) => {\r\n        if (member.id) {\r\n          history.push(\"/signin\");\r\n        } else {\r\n          alert.show('Unable to register' , { type: \"error\" , position:\"top center\"})\r\n        }\r\n      });\r\n  };\r\n\r\n  return (\r\n    <RegistrationPageBody>\r\n      <RegistrationLegend>Registration</RegistrationLegend>\r\n      <RegistrationArticle>\r\n        <RegistrationMain>\r\n          <RegistrationFieldSet>\r\n            <NameFieldContainer>\r\n              <NameField>\r\n                <RegistrationInput\r\n                  placeholder='First Name (required)'\r\n                  type=\"text\"\r\n                  name=\"fname\"\r\n                  id=\"fname\"\r\n                  onChange={onFirstNameChange}\r\n                />\r\n              </NameField>\r\n\r\n              <NameField>\r\n                <RegistrationInput\r\n                  style = {{marginLeft:\"15%\"}}\r\n                  placeholder='Last Name (required)'\r\n                  type=\"text\"\r\n                  name=\"lname\"\r\n                  id=\"lname\"\r\n                  onChange={onLastNameChange}\r\n                />\r\n              </NameField>\r\n            </NameFieldContainer>\r\n\r\n            <Email>\r\n              <RegistrationInput\r\n                placeholder='Email (required)'\r\n                type=\"email\"\r\n                name=\"email-address\"\r\n                id=\"email-address\"\r\n                onChange={onEmailChange}\r\n              />\r\n            </Email>\r\n              \r\n            <Password \r\n >\r\n              <RegistrationInput\r\n                placeholder='Password (required)'\r\n                type=\"password\"\r\n                name=\"password\"\r\n                id=\"password\"\r\n                onChange={onPasswordChange}\r\n              />\r\n              <div>\r\n              <InfoIcon \r\n                src={infoIconSvg} \r\n                alt=\"info-icon\"\r\n                onMouseOver={onMouseOverInfo} \r\n                onMouseOut={() => setPopupVisibility(false)}\r\n                />\r\n                { popupVisibility ?\r\n                  <ToolTip>\r\n                    <Arrow/>\r\n                    <span style = {{color:\"#3f7fba\", fontWeight:\"bold\", textDecoration: 'underline'}}>Password Rules</span>\r\n                    <br/>\r\n                    <span>-Must be at least 8 characters long</span>\r\n                    <br/>\r\n                    <span>-Must contain at least one uppercase letter.</span>\r\n                    <br/>\r\n                    <span>-Must contain at least one lowercase letter.</span>\r\n                    <br/>\r\n                    <span>-Must contain at least one number.</span>\r\n                  </ToolTip>\r\n              : null}\r\n              </div>\r\n\r\n\r\n            </Password>\r\n            {\r\n              failedPassword ?\r\n              <PasswordRules>\r\n                <span>Password must: </span>\r\n                <br/>\r\n                <span>be at least 8 characters long; contain at least one uppercase letter;</span>\r\n                <br/>\r\n                <span>Contain at least one lowercase letter; contain at least one number.</span>\r\n              </PasswordRules>\r\n              : null\r\n            }\r\n          </RegistrationFieldSet>\r\n            \r\n          <RegistrationSubmit\r\n            type=\"submit\"\r\n            value=\"Register\"\r\n            onClick={onSubmitRegister}\r\n          />\r\n          <SignInLinkContainer>\r\n            <SignInLink onClick={() => history.push(\"/signin\")} className=\"signin-link\">\r\n                Already have an account?\r\n            </SignInLink>\r\n          </SignInLinkContainer>\r\n          \r\n        </RegistrationMain>\r\n        \r\n      </RegistrationArticle>\r\n\r\n    </RegistrationPageBody>\r\n  );\r\n}\r\n\r\n\r\nexport default RegistrationPage;\r\n"]},"metadata":{},"sourceType":"module"}